<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D&D Party Funds Tracker</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            colors: {
              primary: {
                light: "#a78bfa", // lighter purple
                DEFAULT: "#8b5cf6", // purple-600
                dark: "#6d28d9", // darker purple
              },
              secondary: {
                light: "#fde047", // lighter yellow
                DEFAULT: "#facc15", // yellow-400
                dark: "#eab308", // darker yellow/gold
              },
              background: "#111827", // slate-900
              surface: "#1f2937", // slate-800
              surfaceContent: "#374151", // slate-700
              textPrimary: "#f3f4f6", // slate-100
              textSecondary: "#9ca3af", // slate-400
              danger: "#ef4444", // red-500
              success: "#22c55e", // green-500
            },
            boxShadow: {
              input:
                "0 1px 2px 0 rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(139, 92, 246, 0.5)", // Subtle glow for inputs
              button:
                "0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(139, 92, 246, 0.7)",
            },
            borderRadius: {
              xl: "0.75rem",
              "2xl": "1rem",
              "3xl": "1.5rem",
            },
          },
        },
      };
    </script>
    <style>
      /* Custom scrollbar for better aesthetics */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1f2937; /* slate-800 */
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #4b5563; /* slate-600 */
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #6b7280; /* slate-500 */
      }

      /* Custom styles for number inputs to hide spinners */
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield; /* Firefox */
      }

      /* Styling for the modal */
      .modal {
        transition: opacity 0.25s ease;
      }
      .modal-content {
        transition: transform 0.25s ease;
      }
      /* Basic styling for disabled buttons */
      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body
    class="bg-background text-textPrimary font-sans antialiased min-h-screen flex flex-col items-center py-8 px-4"
  >
    <div class="w-full max-w-5xl mx-auto">
      <header class="mb-10 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-primary-light mb-2">
          D&D Party Funds Tracker
        </h1>
        <p class="text-lg text-textSecondary">
          Manage your party's treasure with ease.
        </p>
      </header>

      <section
        id="partySetupSection"
        class="mb-8 p-6 bg-surface rounded-xl shadow-lg"
      >
        <h2 class="text-2xl font-semibold mb-4 text-primary-light">
          Party Setup
        </h2>
        <div class="flex flex-col sm:flex-row gap-4 items-end">
          <div class="flex-grow">
            <label
              for="partyNameInput"
              class="block text-sm font-medium text-textSecondary mb-1"
              >Party Name:</label
            >
            <input
              type="text"
              id="partyNameInput"
              placeholder="e.g., The Crimson Blades"
              class="w-full p-3 bg-surfaceContent border border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-shadow shadow-input text-textPrimary placeholder-gray-500"
            />
          </div>
          <button
            id="createPartyButton"
            class="w-full sm:w-auto bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-6 rounded-lg shadow-button hover:shadow-lg transition-all duration-150 ease-in-out"
          >
            Create/Load Party
          </button>
        </div>
        <p id="loadedPartyName" class="mt-4 text-lg text-secondary hidden">
          Current Party: <span class="font-bold"></span>
        </p>
      </section>

      <main id="appArea" class="hidden space-y-8">
        <section
          id="partyTreasurySection"
          class="p-6 bg-surface rounded-xl shadow-lg"
        >
          <h2 class="text-2xl font-semibold mb-6 text-primary-light">
            Party Treasury
          </h2>
          <div
            id="partyFundsDisplay"
            class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-6 text-center"
          ></div>
          <div
            class="flex flex-col sm:flex-row gap-4 items-center justify-center"
          >
            <button
              id="depositPartyButton"
              class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:shadow-lg transition-all duration-150 ease-in-out"
            >
              Deposit to Party
            </button>
            <button
              id="withdrawPartyButton"
              class="w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:shadow-lg transition-all duration-150 ease-in-out"
            >
              Withdraw from Party
            </button>
          </div>
        </section>

        <section
          id="partyMembersSection"
          class="p-6 bg-surface rounded-xl shadow-lg"
        >
          <h2 class="text-2xl font-semibold mb-2 text-primary-light">
            Party Members
          </h2>
          <p class="text-sm text-textSecondary mb-6">
            Add members and manage their individual funds.
          </p>

          <div
            class="mb-6 p-4 border border-gray-700 rounded-lg bg-surfaceContent"
          >
            <h3 class="text-xl font-medium mb-3 text-primary-light">
              Add New Member
            </h3>
            <div class="flex flex-col sm:flex-row gap-4 items-end">
              <div class="flex-grow">
                <label
                  for="memberNameInput"
                  class="block text-sm font-medium text-textSecondary mb-1"
                  >Member Name:</label
                >
                <input
                  type="text"
                  id="memberNameInput"
                  placeholder="e.g., Elara Meadowlight"
                  class="w-full p-3 bg-background border border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-shadow shadow-input text-textPrimary placeholder-gray-500"
                />
              </div>
              <button
                id="addMemberButton"
                class="w-full sm:w-auto bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-6 rounded-lg shadow-button hover:shadow-lg transition-all duration-150 ease-in-out"
              >
                Add Member
              </button>
            </div>
          </div>

          <div id="membersList" class="space-y-6"></div>
        </section>
        <section
          id="transactionHistory"
          class="p-6 bg-surface rounded-xl shadow-lg"
        >
          <h2 class="text-2xl font-semibold mb-6 text-primary-light">
            Transaction History
          </h2>
          <div class="space-y-4">
            <div id="transactionHistoryList" class="space-y-4">
              <!-- Transactions will be dynamically added here -->
            </div>
          </div>
        </section>
      </main>

      <div
        id="transactionModal"
        class="modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden z-50"
      >
        <div
          class="modal-content bg-surface p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md transform scale-95 opacity-0"
        >
          <h3
            id="modalTitle"
            class="text-2xl font-semibold mb-6 text-primary-light text-center"
          >
            Transaction
          </h3>
          <form id="transactionForm" class="space-y-4">
            <div>
              <label
                for="transactionType"
                class="block text-sm font-medium text-textSecondary mb-1"
                >Transaction Type:</label
              >
              <select
                id="transactionType"
                class="w-full p-3 bg-surfaceContent border border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-textPrimary"
              ></select>
            </div>

            <div id="memberSelectGroup" class="hidden">
              <label
                for="memberSelect"
                class="block text-sm font-medium text-textSecondary mb-1"
                >Select Member:</label
              >
              <select
                id="memberSelect"
                class="w-full p-3 bg-surfaceContent border border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-textPrimary"
              ></select>
            </div>

            <div id="toMemberSelectGroup" class="hidden">
              <label
                for="toMemberSelect"
                class="block text-sm font-medium text-textSecondary mb-1"
                >To Member:</label
              >
              <select
                id="toMemberSelect"
                class="w-full p-3 bg-surfaceContent border border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-textPrimary"
              ></select>
            </div>

            <p class="text-sm text-textSecondary">Enter amount to transfer:</p>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 currency-inputs">
              <div>
                <label
                  for="ppInput"
                  class="block text-xs font-medium text-textSecondary"
                  >PP:</label
                >
                <input
                  type="number"
                  id="ppInput"
                  name="pp"
                  min="0"
                  placeholder="0"
                  class="w-full p-2 bg-background border border-gray-600 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-textPrimary placeholder-gray-500"
                />
              </div>
              <div>
                <label
                  for="gpInput"
                  class="block text-xs font-medium text-textSecondary"
                  >GP:</label
                >
                <input
                  type="number"
                  id="gpInput"
                  name="gp"
                  min="0"
                  placeholder="0"
                  class="w-full p-2 bg-background border border-gray-600 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-textPrimary placeholder-gray-500"
                />
              </div>
              <div>
                <label
                  for="epInput"
                  class="block text-xs font-medium text-textSecondary"
                  >EP:</label
                >
                <input
                  type="number"
                  id="epInput"
                  name="ep"
                  min="0"
                  placeholder="0"
                  class="w-full p-2 bg-background border border-gray-600 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-textPrimary placeholder-gray-500"
                />
              </div>
              <div>
                <label
                  for="spInput"
                  class="block text-xs font-medium text-textSecondary"
                  >SP:</label
                >
                <input
                  type="number"
                  id="spInput"
                  name="sp"
                  min="0"
                  placeholder="0"
                  class="w-full p-2 bg-background border border-gray-600 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-textPrimary placeholder-gray-500"
                />
              </div>
              <div>
                <label
                  for="cpInput"
                  class="block text-xs font-medium text-textSecondary"
                  >CP:</label
                >
                <input
                  type="number"
                  id="cpInput"
                  name="cp"
                  min="0"
                  placeholder="0"
                  class="w-full p-2 bg-background border border-gray-600 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-textPrimary placeholder-gray-500"
                />
              </div>
            </div>
            <div
              id="transactionErrorMessage"
              class="text-danger text-sm mt-2 hidden"
            ></div>

            <div class="flex gap-4 pt-4">
              <button
                type="button"
                id="cancelTransactionButton"
                class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-5 rounded-lg transition-colors"
              >
                Cancel
              </button>
              <button
                type="submit"
                id="confirmTransactionButton"
                class="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 px-5 rounded-lg shadow-button hover:shadow-lg transition-all"
              >
                Confirm
              </button>
            </div>
          </form>
        </div>
      </div>

      <div
        id="messageModal"
        class="fixed bottom-5 right-5 bg-surfaceContent text-textPrimary p-4 rounded-lg shadow-xl hidden z-50 max-w-sm transition-opacity duration-300"
      >
        <p id="messageText"></p>
      </div>
    </div>
    <footer
      class="w-full max-w-5xl mx-auto mt-12 text-center text-textSecondary text-sm"
    >
      <p>
        &copy; <span id="currentYear"></span> D&D Party Funds Tracker. For
        personal use.
      </p>
      <p>
        Remember to save your data regularly if your browser doesn't do it
        automatically with Local Storage!
      </p>
    </footer>

    <script src="js/script.js"></script>
  </body>
</html>
